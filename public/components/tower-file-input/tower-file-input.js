/**
 * @module       tower-file-input
 * @requires     module:jQuery
 * @author       StrutTower
 * @see          https://github.com/StrutTower/tower-file-input
 * @license      MIT
 */
!function(t){t.fn.fileInput=function(e){function i(e){var i=t(this),o=i.closest(".tower-file"),r=o.find("label"),a=o.find(".tower-file-clear"),l=o.find(".tower-file-list").empty().hide(),c=o.find("img"),u=o.find(".tower-file-details");u.length||(o.append('<div class="tower-file-details"></div>'),u=o.find(".tower-file-details"));var d=i[0].files,h="";if(null!==s.iconClass&&s.iconClass.length>0&&(h="<span class="+s.iconClass+"></span>"),1===d.length){var f=d[0];r.html(h+f.name),f.type.match("image.*")&&s.imgPreview?(c.length||(u.append('<img class="'+s.imgPreviewClass+'" />'),c=o.find("img")),u.show(),n(f,c)):(u.hide(),c.attr("src","").hide()),a.attr("disabled",null)}else if(d.length>1){if(c.attr("src","").hide(),s.fileList){l.length||(u.append('<ul class="tower-file-list"></ul>'),l=o.find(".tower-file-list"));for(var p=0;p<d.length;p++)l.append("<li>"+d[p].name+"</li>");u.show(),l.show()}else l.hide();r.html(h+d.length+" Files Selected"),a.attr("disabled",null)}else u.hide(),c.attr("src","").hide(),r.html(r.data("default-text")),a.attr("disabled","")}function n(t,e){var i=new FileReader;i.onload=function(t){e.attr("src",i.result).show()},i.readAsDataURL(t)}function o(){var e=t(this).closest(".tower-file");e.find('input[type="file"]').val("");var i=e.find("label");i.html(i.data("default-text")),e.find(".tower-file-clear").attr("disabled","");var n=e.find(".tower-file-details");n.hide()}var s=t.extend({fileList:!0,iconClass:null,imgPreview:!0,imgPreviewClass:null},e);this.filter('input[type="file"]').each(function(){var e=t(this).closest(".tower-file"),n=e.find("label");n.length&&n.attr("data-default-text",n.html().trim());var s=e.find(".tower-file-clear");s.length&&(s.attr("disabled",""),s.on("click",o)),t(this).on("change",i)})}}(jQuery);
